---
description: "This is a general explainer for pull request reviews where I think unrelated changes should be split into a separate PR."
image:
  alt: Ice Cube looking happy with a red life preserver around his neck
  src: "~/assets/blog/ice-cube-happy-fishing.png"
pubDate: 2024-01-08
tags: [
	"pull requests",
	"reviews",
]
title: "Split Out Unrelated Changes"
---

import checkYourselfBeforeYouWreckYourselfCallie from "~/assets/blog/check-yourself-before-you-wreck-yourself-callie.webm";
import checkYourselfBeforeYouWreckYourselfIce from "~/assets/blog/check-yourself-before-you-wreck-yourself-ice.webm";
import checkYourselfBeforeYouWreckYourselfZach from "~/assets/blog/check-yourself-before-you-wreck-yourself-zach.webm";
import LabeledImage from "~/components/blog/mdx/LabeledImage.astro";
import LabeledVideo from "~/components/blog/mdx/LabeledVideo.astro";

Hi!
You might have been linked this blog post in a pull request that has a lot of changes in it.
There might be a request linking to this blog post, asking that you split out some or all of those unrelated changes from it.

This blog post is an explainer for why to split out unrelated changes from reviews.

<LabeledVideo
	alt="Zach Galifanakis from 'The Hangover' angrily saying 'check yourself... before you wreck yourself'."
	description="Listen to Alan. Knowing the correct ways of self-checking will reduce occurrences of self-wrecking."
	original="https://tenor.com/view/hangover-gif-12838870"
	src={checkYourselfBeforeYouWreckYourselfZach}
/>

## Split Out Unrelated Changes

For the most part, the larger a pull request, the longer it will take to review and get merged.
Larger pull requests generally come with more cost and more risk than smaller PRs.
They also clutter the Git history for files, making it harder to search back over time to see why logic changed when.

> ðŸ‘‰ See [Why Open Source Pull Requests Can Take A While](https://www.joshuakgoldberg.com/blog/open-source-pull-request-timing) for why open source pull requests in particular can take a long time.

Anything we can do to reduce that cost is helpful.
My favorite strategies in particular are:

- Separating changes that impact code logic out from changes that only impact layout, formatting, or style.
- Instead of one PR that resolves multiple issues at once, it can often be better to send one PR for each one of those issues.

## Separate Logical and Stylistic Changes

Stylistic changes generally don't require very much review time per line of code changed.
Teams sometimes take a long time to discuss their stylistic preferences, but once those discussions are resolved, changing code to adhere to new styles is often straightforward.

Logical changes to code, on the other hand, generally take much longer to review.
Which is good: logical changes come with a much higher risk of bugs.
Every changed line of code in a pull request that changes logic should be scrutinized to make sure it doesn't break something.

Introducing stylistic changes in a logical PR makes that those stylistically changed lines appear to need scrutiny.
Reviewers will have to remember that those lines aren't logically changed in reviews.
That's a tax that slows down review of the PR.

Consider trying to understand this large set of changes to a `repeatMessage` function:

```diff
-export function repeatMessage(
-       times: number,
-       ...messages: string[]
-) {
-        for (let i = 0; i < times; i += 1)
-               for (const message of messages)
+export function repeatMessage(times: number, messages: string[]) {
+        for (let i = 0; i < times; i += 1) {
+               for (const message of messages) {
                        console.log(message);
+               }
+       }
 }
```

Now consider this version of the same change but with only logical differences:

```diff
-export function repeatMessage(times: number, ...messages: string[]) {
+export function repeatMessage(times: number, messages: string[]) {
        for (let i = 0; i < times; i += 1) {
                for (const message of messages) {
                        console.log(message);
```

Much easier and faster to read through, right?
All that was being changed was removing the `...` -- but the first diff obfuscated that straightforward intent with misleading stylistic changes.

### Automate Stylistic Preferences (If Possible)

Co-opting logical pull requests to enforce stylistic preferences is not an efficient way to roll out those preferences.
Stylistic preferences lend themselves well to automation.
Trying to touch them up one-by-one is sisyphean: a never-ending expenditure of effort that yields little to no real results.

Formatters and linters are pretty good at **automating** most stylistic conventions.
If you want to enforce a stylistic preference, do so with as much automation as possible.

Most of the `repeatMessage` formatting from earlier could be enforced with any common formatter such as [Prettier](https://prettier.io) and linter such as [ESLint](https://eslint.org).
I personally also include [typescript-eslint's `stylisticTypeChecked` config](https://typescript-eslint.io/users/configs#stylistic-type-checked) along with Prettier plugins such as [prettier-plugin-curly](https://github.com/JoshuaKGoldberg/prettier-plugin-curly) to enforce a large set of consistency preferences.

## One Pull Request Per Task

On a similar note, it's generally easier to review a pull request that resolves one task (a.k.a. GitHub issue) rather than a pull request resolving multiple tasks.
Each task you add to a pull request increases the size and complexity of the pul request, making longer and more convoluted to review.
It becomes harder to keep track of which changes apply to which task.

Furthermore, many repositories -including most of mine- automatically generate changelogs and new releases.
Granular pull requests can become individual changelog entries and releases.
Catch-all pull requests don't fit well into those systems.

As a general ideology, I try to make each of my pull requests address a single GitHub issue.
There should be one granular `fixes #<number>` in the pull request description per GitHub's docs on [linking a pull request to an issue](https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/linking-a-pull-request-to-an-issue).

## Everything in Balance

These are't absolute rules.
Sometimes the convenience of including a small unrelated change in a pull request is worth more than the benefits of splitting up changes.

Filing an issue and reviewing a pull request both take time.
If that time is greater than the cost of adding a small unrelated change to a pull request, then it may be worth it to just stick with the one pull request.

If I'm already refactoring an area of code, and touching up some stylistic preferences wouldn't bloat the pull request too much, I might throw them in.
Especially if those changes aren't something that need to be applied elsewhere in the repository.

When including an unrelated change in a pull request, I recommend explicitly adding a comment explaining why it's there.

## Further Reading

If you want to read more about why granular pull requests are often preferable, I recommend:

- [Google Testing Blog: In Praise of Small Pull Requests](https://testing.googleblog.com/2024/07/in-praise-of-small-pull-requests.html)
- [Are small pull requests better than one large all-encompassing features, and how can I convince my team of that?](https://softwareengineering.stackexchange.com/questions/425665/are-small-pull-requests-better-than-one-large-all-encompasing-features-and-how)
